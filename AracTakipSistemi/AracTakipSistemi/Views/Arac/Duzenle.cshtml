@model dynamic
@{
    ViewData["Title"] = "Araç Düzenle";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<link rel="stylesheet" href="~/css/arac-duzenle.css" />

<div class="arac-duzenle-container">
    <div class="arac-duzenle-form-container">
        <!-- Sayfa Başlığı -->
        <div class="page-header fade-in-up">
            <h1>
                <i class="fas fa-car me-3"></i>
                Araç Düzenle
            </h1>
            <p>
                <strong>@Model.Marka @Model.Model (@Model.Plaka)</strong> aracının bilgilerini güncelleyin
            </p>
        </div>

        <!-- Hata ve Başarı Mesajları -->
        @if (ViewBag.Hata != null)
        {
            <div class="alert alert-danger fade-in-up">
                <i class="fas fa-exclamation-circle me-2"></i>
                @ViewBag.Hata''
            </div>
        }

        @if (TempData["Basari"] != null)
        {
            <div class="alert alert-success fade-in-up">
                <i class="fas fa-check-circle me-2"></i>
                @TempData["Basari"]
            </div>
        }!

        <!-- Araç Düzenleme Formu -->
        <div class="form-card fade-in-up">
            <form method="post" asp-action="Duzenle" asp-controller="Arac" autocomplete="off">
                <input type="hidden" name="ID" value="@Model.ID" />
                
                <div class="form-group">
                    <label for="Marka" class="form-label">
                        <i class="fas fa-car me-2"></i>Marka <span style="color: #ff6b6b;">*</span>
                    </label>
                    <input type="text" class="form-control" name="Marka" id="Marka" 
                           value="@Model.Marka" required maxlength="50"
                           placeholder="Araç markasını girin">
                </div>

                <div class="form-group">
                    <label for="Model" class="form-label">
                        <i class="fas fa-cog me-2"></i>Model <span style="color: #ff6b6b;">*</span>
                    </label>
                    <input type="text" class="form-control" name="Model" id="Model" 
                           value="@Model.Model" required maxlength="50"
                           placeholder="Araç modelini girin">
                </div>

                <div class="form-group">
                    <label for="Plaka" class="form-label">
                        <i class="fas fa-id-card me-2"></i>Plaka <span style="color: #ff6b6b;">*</span>
                    </label>
                    <input type="text" class="form-control" name="Plaka" id="Plaka" 
                           value="@Model.Plaka" required maxlength="20"
                           pattern="[0-9]{2}\s[A-Z]{1,3}\s[0-9]{1,4}" 
                           title="Plaka formatı: 34 ABC 123"
                           placeholder="34 ABC 123">
                    <div class="password-help">
                        <i class="fas fa-info-circle me-2"></i>
                        <strong>Format:</strong> 34 ABC 123 şeklinde girin
                    </div>
                </div>

                <div class="form-group">
                    <label for="AracTipi" class="form-label">
                        <i class="fas fa-list-alt me-2"></i>Araç Tipi <span style="color: #ff6b6b;">*</span>
                    </label>
                    <select class="form-select" name="AracTipi" id="AracTipi" required>
                        <option value="">Araç tipi seçin...</option>
                        @{
                            string aracTipi = Model.AracTipi?.ToString() ?? "";
                        }
                        <option value="Sedan" selected="@(aracTipi == "Sedan" ? "selected" : null)">Sedan</option>
                        <option value="Hatchback" selected="@(aracTipi == "Hatchback" ? "selected" : null)">Hatchback</option>
                        <option value="SUV" selected="@(aracTipi == "SUV" ? "selected" : null)">SUV</option>
                        <option value="Station Wagon" selected="@(aracTipi == "Station Wagon" ? "selected" : null)">Station Wagon</option>
                        <option value="Coupe" selected="@(aracTipi == "Coupe" ? "selected" : null)">Coupe</option>
                        <option value="Cabriolet" selected="@(aracTipi == "Cabriolet" ? "selected" : null)">Cabriolet</option>
                        <option value="Pickup" selected="@(aracTipi == "Pickup" ? "selected" : null)">Pickup</option>
                        <option value="Minivan" selected="@(aracTipi == "Minivan" ? "selected" : null)">Minivan</option>
                        <option value="Ticari Araç" selected="@(aracTipi == "Ticari Araç" ? "selected" : null)">Ticari Araç</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="YakitTuru" class="form-label">
                        <i class="fas fa-gas-pump me-2"></i>Yakıt Türü <span style="color: #ff6b6b;">*</span>
                    </label>
                    <select class="form-select" name="YakitTuru" id="YakitTuru" required>
                        <option value="">Yakıt türü seçin...</option>
                        @{
                            string yakitTuru = Model.YakitTuru?.ToString() ?? "";
                        }
                        <option value="Benzin" selected="@(yakitTuru == "Benzin" ? "selected" : null)">Benzin</option>
                        <option value="Dizel" selected="@(yakitTuru == "Dizel" ? "selected" : null)">Dizel</option>
                        <option value="LPG" selected="@(yakitTuru == "LPG" ? "selected" : null)">LPG</option>
                        <option value="Benzin + LPG" selected="@(yakitTuru == "Benzin + LPG" ? "selected" : null)">Benzin + LPG</option>
                        <option value="Elektrik" selected="@(yakitTuru == "Elektrik" ? "selected" : null)">Elektrik</option>
                        <option value="Hibrit" selected="@(yakitTuru == "Hibrit" ? "selected" : null)">Hibrit</option>
                        <option value="Plug-in Hibrit" selected="@(yakitTuru == "Plug-in Hibrit" ? "selected" : null)">Plug-in Hibrit</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="VitesTipi" class="form-label">
                        <i class="fas fa-cogs me-2"></i>Vites Tipi <span style="color: #ff6b6b;">*</span>
                    </label>
                    <select class="form-select" name="VitesTipi" id="VitesTipi" required>
                        <option value="">Vites tipi seçin...</option>
                        @{
                            string vitesTipi = Model.VitesTipi?.ToString() ?? "";
                        }
                        <option value="Manuel" selected="@(vitesTipi == "Manuel" ? "selected" : null)">Manuel</option>
                        <option value="Otomatik" selected="@(vitesTipi == "Otomatik" ? "selected" : null)">Otomatik</option>
                        <option value="Yarı Otomatik" selected="@(vitesTipi == "Yarı Otomatik" ? "selected" : null)">Yarı Otomatik</option>
                        <option value="CVT" selected="@(vitesTipi == "CVT" ? "selected" : null)">CVT</option>
                        <option value="DSG" selected="@(vitesTipi == "DSG" ? "selected" : null)">DSG</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="Durumu" class="form-label">
                        <i class="fas fa-check-circle me-2"></i>Durum
                    </label>
                    <select class="form-select" name="Durumu" id="Durumu">
                        @{
                            string durumu = Model.Durumu?.ToString() ?? "Müsait";
                        }
                        <option value="Müsait" selected="@(durumu == "Müsait" ? "selected" : null)">Müsait</option>
                        <option value="Bakımda" selected="@(durumu == "Bakımda" ? "selected" : null)">Bakımda</option>
                        <option value="Arızalı" selected="@(durumu == "Arızalı" ? "selected" : null)">Arızalı</option>
                        <option value="Serviste" selected="@(durumu == "Serviste" ? "selected" : null)">Serviste</option>
                    </select>
                    <div class="password-help">
                        <i class="fas fa-info-circle me-2"></i>
                        <strong>Not:</strong> Araç durumu randevu alımını etkiler. Müsait olmayan araçlar için randevu alınamaz.
                    </div>
                </div>

                <div class="text-center">
                    <button type="submit" class="btn btn-primary me-3">
                        <i class="fas fa-save me-2"></i>Değişiklikleri Kaydet
                    </button>
                    <a href="@Url.Action("Index", "Arac")" class="btn btn-secondary">
                        <i class="fas fa-times me-2"></i>İptal
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    
    <script>
        // Plaka formatını otomatik düzenle
        $('#Plaka').on('input', function() {
            var plaka = $(this).val().toUpperCase().replace(/[^0-9A-Z]/g, '');
            
            if (plaka.length >= 2) {
                var formatted = plaka.substring(0, 2);
                if (plaka.length > 2) {
                    formatted += ' ' + plaka.substring(2, 5);
                }
                if (plaka.length > 5) {
                    formatted += ' ' + plaka.substring(5, 9);
                }
                $(this).val(formatted);
            }
        });
    </script>
} 